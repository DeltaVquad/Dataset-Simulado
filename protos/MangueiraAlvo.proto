#VRML_SIM R2025a utf8
# Proto referente a mangueira COM esfera da missão 2 da Eletroquad 2026.


PROTO MangueiraAlvo [
  field SFVec3f    translation      0 -1 1.7   # Posição global do conjunto
  field SFVec3f    translation_esq  0.8 0 1.3
  field SFVec3f    translation_dir  0.8 0 -1.3
  field SFRotation rotation         0 1 0 1.57 # Rotação global
  field SFVec3f    sphereOffset     0 0 0.4   # Posição da esfera relativa ao centro da mangueira
  field SFString   name             "conjunto_mangueira"
]
{
%<
const hose_height = 2.5;
const hose_radius = 0.00625;
const sphere_radius = 0.125;

let hose_color = "1 0 0";
let sphere_color = "1 0.35 0";
let haste_color = "0 0 0";
>%

Solid {
  translation IS translation
  rotation IS rotation
  name IS name
  children [
    # --- Haste esquerda ---
    Solid {
      translation IS translation_esq   
      children [              
        Shape {
          appearance PBRAppearance {
            baseColor %<= haste_color >%
            metalness 0
            roughness 1
          }
          geometry Box {
            size 1.7 0.2 0.2
          }
        }
      ]
    }
    # --- Haste direita ---
    Solid {
      translation IS translation_dir   
      children [              
        Shape {
          appearance PBRAppearance {
            baseColor %<= haste_color >%
            metalness 0
            roughness 1
          }
          geometry Box {
            size 1.7 0.2 0.2
          }
        }
      ]
    }
      
    # --- Mangueira c/ Esfera ---
    Group {
      children [
        Transform {
          children [ 
            Shape {
              appearance PBRAppearance {
                baseColor %<= hose_color >%
                metalness 0
                roughness 1
              }
              geometry DEF HOSE_GEOM Cylinder {
                height %<= hose_height >%
                radius %<= hose_radius >%
              }
            }
          ] 
        }
        
        # --- Esfera ---
        Transform {
          translation IS sphereOffset
          children [
            Shape {
              appearance PBRAppearance {
                baseColor %<= sphere_color >%
                metalness 0
                roughness 1
              }
              geometry DEF SPHERE_GEOM Sphere {
                radius %<= sphere_radius >%
              }
            }
          ]
        }
      ]
    }
  ]
}
}